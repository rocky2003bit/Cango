<!DOCTYPE html>
<html>
<head>
  <title>Orders - Admin</title>
</head>
<body>
  <h1>Orders</h1>

  <input type="text" id="searchEmail" placeholder="Search by email">
  <button onclick="loadOrders()">Search</button>

  <table border="1" id="ordersTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>WhatsApp</th>
        <th>Content Ordered</th>
        <th>Order Date/Time</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function loadOrders() {
      const email = document.getElementById('searchEmail').value;
      const url = email ? `/api/admin/orders?email=${encodeURIComponent(email)}` : '/api/admin/orders';
      const res = await fetch(url);
      const orders = await res.json();

      const tbody = document.querySelector('#ordersTable tbody');
      tbody.innerHTML = '';
      orders.forEach(order => {
        tbody.innerHTML += `
          <tr>
            <td>${order.name}</td>
            <td>${order.email}</td>
            <td>${order.whatsapp || ''}</td>
            <td>${order.content_ordered}</td>
            <td>${order.order_date_time}</td>
          </tr>
        `;
      });
    }

    // Load all orders when page opens
    loadOrders();
  </script>
</body>
</html>
